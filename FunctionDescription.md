# FunctionDescription.md

Gym4me의 현재 구현된 주요 기능 및 상세 동작 설명입니다.

## 1. 사용자 관리 (Authentication)
- **회원가입/로그인**: 이메일 기반 인증을 지원합니다.
- **권한 관리 (Role-based Access Control)**:
    - **SITE_ADMIN (lvl 100)**: 시스템 전체 관리자.
    - **MANAGER (lvl 20)**: 헬스장 지점 관리자.
    - **TRAINER (lvl 10)**: 담당 회원 및 클래스 관리.
    - **MEMBER (lvl 5)**: 일반 회원 (PT 수강 가능).
    - **OBSERVER (lvl 1)**: 대기 회원 (최초 가입 시 기본값).

## 2. 트레이너 대시보드 (Trainer Dashboard)
- **클라이언트 관리 (My Clients)**: 담당 중인 회원 목록을 확인하고, 신규 회원을 이메일로 검색하여 등록할 수 있습니다.
- **클래스 관리 (My Classes)**:
    - 그룹 수업을 위한 클래스 생성 (예: 모닝 요가, 크로스핏).
    - 클래스별 회원 초대 및 등록.
    - 클래스 전용 달력을 통한 일괄 스케줄링.

## 3. 스마트 일정 관리 (Calendar & Scheduling)
- **개인/클래스 스케줄**:
    - 개인 PT 일정(Individual)과 그룹 클래스 일정(Class)을 구분하여 관리합니다.
    - 클래스 일정은 해당 클래스에 속한 모든 회원의 달력에 자동으로 연동됩니다.
- **시각적 구분**: 
    - 개인 일정: 단색 배경.
    - 클래스 일정: 스트라이프(빗금) 패턴 및 'CLASS' 배지 표시.
- **상태 관리**: PENDING (승인 대기), APPROVED (승인됨), COMPLETED (완료됨), CANCELLED (취소됨) 상태를 제공합니다.

## 4. 세션 완료 및 수강권 차감 (Session Completion)
- **디지털 서명**: PT 세션 완료 시 Trainee의 디지털 서명을 패드에 입력받아 검증합니다.
- **자동 차감 로직**: 
    - 세션 완료 시 회원의 `remainingSessions`가 1회 차감됩니다.
    - **그룹 클래스 대응**: 클래스 세션 완료 시, 해당 클래스에 등록된 **모든 참여 회원**의 수강권이 동시에 1회 차감됩니다.
- **이력 관리**: `ticketHistory` 컬렉션에 차감 이력(DEDUCT)이 자동으로 기록됩니다.

## 5. 운동 기록 및 신체 데이터
- **세션 로그**: 각 일정마다 수행한 운동 종목, 세트, 횟수, 무게를 기록할 수 있습니다.
- **바디 체크**: 체중, 체지방 등의 신체 데이터를 기록하고 변화를 추적합니다. (구현 중)
